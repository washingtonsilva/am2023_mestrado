<!DOCTYPE html>
<html lang="pt"><head>
<script src="aula04_files/libs/clipboard/clipboard.min.js"></script>
<script src="aula04_files/libs/quarto-html/tabby.min.js"></script>
<script src="aula04_files/libs/quarto-html/popper.min.js"></script>
<script src="aula04_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="aula04_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="aula04_files/libs/quarto-html/light-border.css" rel="stylesheet">
<link href="aula04_files/libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="aula04_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.3.450">

  <meta name="author" content="Prof.&nbsp;Washington Santos da Silva">
  <title>Análise Multivariada</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="aula04_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="aula04_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
  </style>
  <link rel="stylesheet" href="aula04_files/libs/revealjs/dist/theme/quarto.css">
  <link rel="stylesheet" href="logo.css">
  <link href="aula04_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="aula04_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="aula04_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="aula04_files/libs/revealjs/plugin/reveal-chalkboard/font-awesome/css/all.css" rel="stylesheet">
  <link href="aula04_files/libs/revealjs/plugin/reveal-chalkboard/style.css" rel="stylesheet">
  <link href="aula04_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-titled.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-titled) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-titled.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-titled .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-titled .callout-title  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-titled.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-titled.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-title {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-title {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-title {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-titled .callout-body > .callout-content > :last-child {
    margin-bottom: 0.5rem;
  }

  .callout.callout-titled .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-titled) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-title {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-title {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-title {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-title {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-title {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Análise Multivariada</h1>
  <p class="subtitle">Análise de Componentes Principais</p>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Prof.&nbsp;Washington Santos da Silva 
</div>
        <p class="quarto-title-affiliation">
            IFMG - Campus Formiga
          </p>
    </div>
</div>

  <p class="date">13 de novembro de 2023</p>
</section>
<section id="summário-aula" class="slide level2">
<h2>Summário: Aula</h2>
<ul>
<li class="fragment"><p>Lista de Exercícios 1</p></li>
<li class="fragment"><p>Modelos de Regressão Linear: Foco em Previsão</p></li>
<li class="fragment"><p>Análise de Componentes Principais</p></li>
<li class="fragment"><p>Lab: Análise de Componentes Principais em R</p></li>
</ul>
</section>
<section id="aprendizagem-supervisionada-times-não-supervisionada" class="slide level2">
<h2>Aprendizagem Supervisionada <span class="math inline">\(\times\)</span> Não Supervisionada</h2>
<ul>
<li class="fragment"><p>Modelos de Regressão Linear</p>
<ul>
<li class="fragment">Algoritmo de Aprendizagem Supervisionada</li>
</ul></li>
<li class="fragment"><p>Análise de Componentes Principais</p>
<ul>
<li class="fragment">Algoritmo de Aprendizagem Não Supervisionada</li>
</ul></li>
</ul>
</section>
<section id="section" class="slide level2">
<h2></h2>

<img data-src="img/ml.jpeg" style="width:70.0%" class="r-stretch"></section>
<section id="aprendizagem-não-supervisionada" class="slide level2">
<h2>Aprendizagem Não Supervisionada</h2>
<ul>
<li class="fragment"><p>“<strong>Como podemos reduzir a dimensionalidade dos dados, mantendo as informações essenciais das variáveis e identificando os padrões de variação mais significativos entre elas?</strong>”</p></li>
<li class="fragment"><p>A <strong>Análise de Componentes Principais</strong>, é o algortimo não supervisionado para responder a esta pergunta.</p></li>
</ul>
</section>
<section id="análise-de-componentes-principais" class="slide level2">
<h2>Análise de Componentes Principais</h2>
<ul>
<li class="fragment"><p>PCA produz uma representação de <strong>baixa dimensão</strong> de um conjunto de dados.</p></li>
<li class="fragment"><p>Encontra uma sequência de <strong>combinações lineares dos variáveis</strong> que têm variância máxima e são mutuamente não correlacionadas.</p></li>
<li class="fragment"><p>Além de produzir variáveis derivadas para uso em problemas de aprendizagem supervisionada, a PCA também é uma ferramenta para visualização de dados, ou seja, é uma ferramenta para a <strong>Análise Exploratória de Dados</strong>.</p></li>
</ul>
</section>
<section id="análise-de-componentes-principais-1" class="slide level2">
<h2>Análise de Componentes Principais</h2>
<ul>
<li class="fragment"><p>Suponha que desejamos visualizar <span class="math inline">\(n\)</span> observações com medições em um conjunto de <span class="math inline">\(p\)</span> características (<span class="math inline">\(X_1,X_2, \ldots,X_p\)</span>), como parte de uma análise exploratória de dados.</p></li>
<li class="fragment"><p>Poderíamos fazer isso examinando <strong>gráficos de dispersão</strong> bidimensionais dos dados, cada um dos quais contém as medições das <span class="math inline">\(n\)</span> observações em duas das características.</p></li>
</ul>
</section>
<section id="análise-de-componentes-principais-2" class="slide level2">
<h2>Análise de Componentes Principais</h2>
<ul>
<li class="fragment"><p>Entretanto, temos <span class="math inline">\(p(p-1)/2\)</span> gráficos de dispersão, por exemplo, com <span class="math inline">\(p = 10\)</span>, teríamos 45 gráficos.</p></li>
<li class="fragment"><p>Se <span class="math inline">\(p\)</span> é grande, então certamente não será é viável observar todos;</p></li>
<li class="fragment"><p>Além disso, muito provavelmente nenhum deles será informativo, uma vez que cada um contém apenas uma pequena fração do total informações presentes no conjunto de dados.</p></li>
<li class="fragment"><p>É necessário um método melhor para visualizar as <span class="math inline">\(n\)</span> observações quando <span class="math inline">\(p\)</span> é grande.</p></li>
</ul>
</section>
<section id="análise-de-componentes-principais-3" class="slide level2">
<h2>Análise de Componentes Principais</h2>
<ul>
<li class="fragment"><p>Em particular, gostaríamos de encontrar uma <strong>representação de baixa dimensão</strong> dos dados que capturasse o <strong>máximo de informação</strong> possível.</p></li>
<li class="fragment"><p>Por exemplo, se pudermos obter uma representação bidimensional dos dados que capture a maior parte da informação, então poderemos representar graficamente as observações neste espaço de baixa dimensão.</p></li>
</ul>
</section>
<section id="análise-de-componentes-principais-4" class="slide level2">
<h2>Análise de Componentes Principais</h2>
<ul>
<li class="fragment"><p>O PCA fornece uma ferramenta para fazer exatamente isso.</p></li>
<li class="fragment"><p>PCA encontra uma representação de baixa dimensão de um conjunto de dados que contenha o máximo possível de variação (informação).</p></li>
<li class="fragment"><p>A ideia é que cada uma das <span class="math inline">\(n\)</span> observações está no espaço <span class="math inline">\(p\)</span>-dimensional, mas nem todas estas dimensões são igualmente informativas.</p></li>
</ul>
</section>
<section id="análise-de-componentes-principais-5" class="slide level2">
<h2>Análise de Componentes Principais</h2>
<ul>
<li class="fragment"><p>A PCA procura um pequeno número de dimensões que sejam tão informativas quanto possível, onde o conceito de informativa é medido pela quantidade que as observações variam ao longo de cada dimensão, ou seja, é medida pela <strong>variabilidade</strong>.</p></li>
<li class="fragment"><p>Cada uma das dimensões encontradas pelo PCA é uma combinação linear dos <span class="math inline">\(p\)</span> caracteríticas (variáveis preditoras).</p></li>
</ul>
</section>
<section id="obtendo-os-componentes-principais" class="slide level2">
<h2>Obtendo os Componentes Principais</h2>
<ul>
<li class="fragment">O <em>primeiro componente principal</em> de um conjunto de características (<span class="math inline">\(X_1,X_2, \ldots,X_p\)</span>) é a combinação linear das características que possue a maior variância.:</li>
</ul>
<p><span class="math display">\[
Z_1 = \phi_{11}X_1 + + \phi_{21}X_2 + \ldots + \phi_{p1}X_p
\]</span></p>
<ul>
<li class="fragment"><p><em>Normalizada</em> significa que: <span class="math inline">\(\sum_{j=1}^{p} \phi_{j1}^2 = 1\)</span>.</p></li>
<li class="fragment"><p>Nos referimos aos elementos <span class="math inline">\(\phi_{11},\ldots,\phi_{p1}\)</span> como as <strong>cargas</strong> do primeiro componente principal.</p></li>
</ul>
</section>
<section id="obtendo-os-componentes-principais-1" class="slide level2">
<h2>Obtendo os Componentes Principais</h2>
<ul>
<li class="fragment"><p>Juntas, as cargas constituem o <strong>vetor de cargas</strong> (<em>loading vector</em>) do componente principal: <span class="math inline">\((\phi_{11}, \phi_{21}\ldots,\phi_{p1})^T\)</span></p></li>
<li class="fragment"><p>Assim, dado um conjunto de dados <span class="math inline">\(X\)</span> <span class="math inline">\((n \times p)\)</span>, como calculamos o primeiro componente principal?</p></li>
</ul>
</section>
<section id="obtendo-os-componentes-principais-2" class="slide level2">
<h2>Obtendo os Componentes Principais</h2>
<ul>
<li class="fragment"><p>Como estamos interessados apenas na variância, assumimos que cada uma das variáveis em <span class="math inline">\(X\)</span> foi <strong>centrada</strong> para ter média zero.</p></li>
<li class="fragment"><p>Procuramos então a combinação linear dos <span class="math inline">\(x\)</span>’s amostrais da forma:</p></li>
</ul>
<p><span id="eq-z"><span class="math display">\[
z_{i1} = \phi_{11}x_{i1} + + \phi_{21}x_{i2} + \ldots + \phi_{p1}X_{ip}
\qquad(1)\]</span></span></p>
<ul>
<li class="fragment">que possui a maior variância amostral, sujeita a restrição <span class="math inline">\(\sum_{j=1}^{p}\phi_{j1}^2 = 1\)</span>.</li>
</ul>
</section>
<section id="obtendo-os-componentes-principais-3" class="slide level2">
<h2>Obtendo os Componentes Principais</h2>
<ul>
<li class="fragment">Portanto, o vetor de cargas do primeiro componente principal é a solução do seguinte problema de otimização:</li>
</ul>
<p><span id="eq-pricomp"><span class="math display">\[
\begin{align*}
\underset{\phi_{11},\ldots,\phi_{p1}}{maximizar}   &amp; \,\, \Bigl[\frac{1}{n}\sum_{i=1}^{1} \Bigl(\sum_{j=1}^{p}\phi_{j1}x_{ij}\Bigr)^2 \Bigr]   \\
\text{sujeito a:}  &amp; \,\, \sum_{j=1}^{p}\phi_{j1}^2 = 1
\end{align*}
\qquad(2)\]</span></span></p>
</section>
<section id="obtendo-os-componentes-principais-4" class="slide level2">
<h2>Obtendo os Componentes Principais</h2>
<ul>
<li class="fragment">A partir da <a href="#/obtendo-os-componentes-principais-2">Equação&nbsp;1</a>, a função objetivo (<a href="#/obtendo-os-componentes-principais-3">Equação&nbsp;2</a>) pode ser escrita como:</li>
</ul>
<p><span class="math display">\[
\frac{1}{n}\sum_{i=1}^{1} \Bigl(\sum_{j=1}^{p}\phi_{j1}x_{ij}\Bigr)^2 =
\frac{1}{n}\sum_{i=1}^n z_{i1}^2
\]</span></p>
<ul>
<li class="fragment"><p>Uma vez que <span class="math inline">\(\frac{1}{n}\sum_{1=1}^n x_{ij} = 0\)</span>, a média dos <span class="math inline">\(z_{11},\ldots,z_{n1}\)</span> também é igual a zero.</p></li>
<li class="fragment"><p>Portanto, a função objetivo que maximizamos é apenas a variância amostral dos <span class="math inline">\(n\)</span> valores de <span class="math inline">\(z_{i1}\)</span>.</p></li>
</ul>
</section>
<section id="obtendo-os-componentes-principais-5" class="slide level2">
<h2>Obtendo os Componentes Principais</h2>
<ul>
<li class="fragment"><p>Nos referimos aos <span class="math inline">\(z_{11},\ldots,z_{n1}\)</span> como os <strong>scores</strong> do primeiro componente principal.</p></li>
<li class="fragment"><p>O problema descrito pela <a href="#/obtendo-os-componentes-principais-3">Equação&nbsp;2</a> pode ser resolvido por duas técnicas de álgebra linear:</p>
<ul>
<li class="fragment">Decomposição espectral (<em>eigen decomposition</em>).</li>
<li class="fragment">Decomposição em Valor Singular (SVD = <em>singular Value Decomposition</em>).</li>
</ul></li>
</ul>
</section>
<section id="teorema-da-decomposição-espectral" class="slide level2 scrollable">
<h2>Teorema da Decomposição Espectral</h2>
<p>Considere um vetor aleatório <span class="math inline">\(Z\)</span>:</p>
<p><span class="math display">\[
\textbf{Z} = \left(\begin{array}{c} z_1\\ z_2\\ \vdots \\z_p\end{array}\right)
\]</span></p>
<p>Com matriz de variância-covariância dada por:</p>
<p><span class="math display">\[
\text{var}(\textbf{Z}) = \Sigma = \left(\begin{array}{cccc}\sigma^2_1 &amp; \sigma_{12} &amp; \dots &amp;\sigma_{1p}\\ \sigma_{21} &amp; \sigma^2_2 &amp; \dots &amp;\sigma_{2p}\\  \vdots &amp; \vdots &amp; \ddots &amp; \vdots \\ \sigma_{p1} &amp; \sigma_{p2} &amp; \dots &amp; \sigma^2_p\end{array}\right)
\]</span></p>
<p>Considere as combinações lineares:</p>
<p><span class="math display">\[
\begin{array}{lll}
z_1 &amp; = &amp; \phi_{11}x_1 + \phi_{12}x_2 + \dots + \phi_{1p}x_p \\
z_2 &amp; = &amp; \phi_{21}x_1 + \phi_{22}x_2 + \dots + \phi_{2p}x_p \\ &amp; &amp; \vdots \\
z_p &amp; = &amp; \phi_{p1}x_1 + \phi_{p2}x_2 + \dots + \phi_{pp}x_p
\end{array}
\]</span></p>
<p><span class="math inline">\(Z\)</span> é uma função dos dados aleatórios, e também é aleatório. Portanto, tem variância dada por:</p>
<p><span class="math display">\[
\text{var}(Y_i) = \sum\limits_{k=1}^{p}\sum\limits_{l=1}^{p}\phi_{ik}\phi_{il}\sigma_{kl} = \mathbf{\phi}'_i\Sigma\mathbf{\phi}_i
\]</span> Além disso, <span class="math inline">\(Z_i\)</span> e <span class="math inline">\(Z_j\)</span> tem covariância:</p>
<p><span class="math display">\[
\text{cov}(Z_i, Z_j) = \sum\limits_{k=1}^{p}\sum\limits_{l=1}^{p}e_{ik}e_{jl}\sigma_{kl} = \mathbf{e}'_i\Sigma\mathbf{e}_j
\]</span> Vamos coletar os coeficientes <span class="math inline">\(\phi_{ij}\)</span> no vetor:</p>
<p><span class="math display">\[
\mathbf{\phi}_i = \left(\begin{array}{c} \phi_{i1}\\ \phi_{i2}\\ \vdots \\ \phi_{ip}\end{array}\right)
\]</span></p>
<p>Portanto, podemos reescrever o problema de otimização na forma matricial como:</p>
<p><span class="math display">\[
\text{var}(z_1) = \sum\limits_{k=1}^{p}\sum\limits_{l=1}^{p}\phi_{1k}\phi_{1l}\sigma_{kl} = \mathbf{\phi}'_1\Sigma\mathbf{\phi}_1
\]</span> Sujeito à restrição de que:</p>
<p><span class="math display">\[
\mathbf{\phi}'_1\mathbf{\phi}_1 = \sum\limits_{j=1}^{p}\phi^2_{1j} = 1
\]</span></p>
<h3 id="como-obetemos-os-coeficientes-phi_ij-dos-cps">Como obetemos os coeficientes <span class="math inline">\(\phi_{ij}\)</span> dos CPs?</h3>
<p>A solução envolve os <strong>autovalores</strong> e <strong>autovetores</strong> da matriz variância-covariância <span class="math inline">\(\Sigma\)</span>.</p>
<p>O <a href="https://en.wikipedia.org/wiki/Eigendecomposition_of_a_matrix" target="_blank">Teorema da Decomposição Espectral</a> nos permite afirmar que a matriz de variância-covariância pode ser escrita como a soma em relação dos autovalores p, multiplicada pelo produto do autovetor correspondente vezes seu transposto:</p>
<p><span class="math display">\[
\Sigma =  \sum_{i=1}^{p}\lambda_i \mathbf{\phi}_i \mathbf{\phi}_i'
\]</span> É fácil ver que a variação total de <span class="math inline">\(X\)</span> é o traço da matriz de variância-covariância, que é a soma das variâncias das variáveis individuais, que por sua vez é igual à soma dos autovalores:</p>
<p><span class="math display">\[
\begin{align}
tr(\Sigma)    &amp; =  \sigma^2_1 + \sigma^2_2 + \dots +\sigma^2_p \\
              &amp; =  \lambda_1 + \lambda_2 + \dots + \lambda_p
\end{align}
\]</span></p>
<ul>
<li class="fragment">Isso nos dará uma interpretação dos componentes em termos da quantidade da variação total explicada por cada componente.</li>
</ul>
<h3 id="decomposição-espectral">Decomposição Espectral</h3>
<ul>
<li class="fragment"><p>A decomposição espectral da matriz de variância-covariância fornece os <strong>autovetores</strong> associados à esta matriz.</p></li>
<li class="fragment"><p>Cada autovetor é uma <strong>combinação linear das variáveis originais</strong>. Esses autovetores são os vetores das <strong>cargas</strong> dos componentes principais.</p></li>
<li class="fragment"><p>Cada coeficiente representa como as variáveis originais contribuem para a formação de um componente principal específico.</p></li>
<li class="fragment"><p>Os autovetores são determinados de tal forma que o primeiro autovetor explica a maior variabilidade dos dados, o segundo explica a segunda maior variabilidadem e assim por diante.</p></li>
<li class="fragment"><p>Portanto, esses coeficientes nos dizem como as variáveis originais estão relacionadas aos principais padrões de variabilidade dos dados.</p></li>
<li class="fragment"><p>Os <strong>autovalores</strong> obtidos na decomposição espectral representam a quantidade da variabilidade total explicada por cada componente principal. Quanto maior o autovalor, mais variabilidade o componente principal captura.</p></li>
<li class="fragment"><p>A variância de cada componente principal é diretamente relacionada ao seu autovalor. Quando você divide o autovalor pelo número de observações menos um (n - 1), obtém a variância explicada por aquele componente principal.</p></li>
<li class="fragment"><p>Essas variâncias indicam a importância relativa de cada componente na explicação da variabilidade dos dados.</p></li>
<li class="fragment"><p>Portanto, os autovalores e suas respectivas variâncias associadas nos dizem o quanto cada componente principal contribui para a explicação global da variabilidade nos dados.</p></li>
<li class="fragment"><p>A função <code>princomp</code> da linguagem R realiza uma análise de componentes principais sobre a matriz de correlações ou de covariâncias usando a função <code>eigen</code>.</p></li>
<li class="fragment"><p>Entretanto, é preferível utilizar a função <code>prcomp</code>, que aplica a <a href="https://en.wikipedia.org/wiki/Singular_value_decomposition" target="_blank">Decomposição em Valor Singular</a> da matriz à matriz de correlações ou de covariâncias</p></li>
</ul>
</section>
<section id="geometria-dos-componentes-principais" class="slide level2">
<h2>Geometria dos Componentes Principais</h2>
<ul>
<li class="fragment"><p>O vetor de cargas <span class="math inline">\(\phi_1\)</span> com elementos <span class="math inline">\(\phi_{11}, \phi_{21},\ldots,\phi_{p1}\)</span> define uma direção no espaço de características ao longo da qual os dados variam mais.</p></li>
<li class="fragment"><p>Se projetarmos os <span class="math inline">\(n\)</span> pontos de dados <span class="math inline">\(x_1,\ldots,x_n\)</span> nesta direção, os valores projetados são os próprios scores do componente principal <span class="math inline">\(z_{11};\ldots; z_{n1}\)</span>.</p></li>
</ul>
</section>
<section id="geometria-dos-componentes-principais-1" class="slide level2">
<h2>Geometria dos Componentes Principais</h2>

<img data-src="img/pca_geom.jpeg" style="width:80.0%" class="r-stretch quarto-figure-center"><p class="caption"><strong>Fig.</strong>&nbsp;1<strong>.</strong> Interpretação Geométrica</p></section>
<section id="outros-componentes-principais" class="slide level2">
<h2>Outros Componentes Principais</h2>
<ul>
<li class="fragment"><p>O segundo componente principal é a combinacão linear de <span class="math inline">\(X_1,\ldots,X_p\)</span> que possui a variância máxima entre todas as combinações lineares que não são correlacionadas com <span class="math inline">\(Z_1\)</span>.</p></li>
<li class="fragment"><p>Os scores do segundo componente principal <span class="math inline">\(z_{12}, z_{22},\ldots,z_{n2}\)</span> tem a forma:</p></li>
</ul>
<p><span class="math display">\[
z_{i2} = \phi_{12}x_{i1} + + \phi_{22}x_{i2} + \ldots + \phi_{p2}x_{ip}
\]</span></p>
<ul>
<li class="fragment">sendo <span class="math inline">\(\phi_2\)</span> o vetor de cargas do do segundo componente principal, com elementos <span class="math inline">\(\phi_{12}, \phi_{22},\ldots,\phi_{p2}\)</span></li>
</ul>
</section>
<section id="outros-componentes-principais-1" class="slide level2">
<h2>Outros Componentes Principais</h2>
<ul>
<li class="fragment"><p>Ocorre que restringir <span class="math inline">\(Z_2\)</span> em não ser correlacionado com <span class="math inline">\(Z_1\)</span> é equivalente a restringir a direção <span class="math inline">\(\phi_2\)</span> a ser ortogonal (perpendicular) à direção <span class="math inline">\(\phi_1\)</span>. E assim por diante.</p></li>
<li class="fragment"><p>As direções dos componentes principais <span class="math inline">\(\phi_1, \phi_2, \phi_3,\ldots\)</span> são a sequência ordenada de vetores singulares à direita da matriz <span class="math inline">\(X\)</span>, e as variâncias dos componentes são <span class="math inline">\(\frac{1}{n}\)</span> vezes o quadrados dos valores singulares.</p></li>
<li class="fragment"><p>Existem no máximo <span class="math inline">\(min(n-1; p)\)</span> componentes principais.</p></li>
</ul>
</section>
<section id="projeções-projeções-que-maximizam-a-variância" class="slide level2">
<h2>Projeções? Projeções que Maximizam a Variância?</h2>

<img data-src="img/cam3.png" style="width:20.0%" class="r-stretch quarto-figure-center"><p class="caption"><strong>Fig.</strong>&nbsp;2<strong>.</strong> Uma silueta enigmática</p></section>
<section id="projeções-projeções-que-maximizam-a-variância-1" class="slide level2">
<h2>Projeções? Projeções que Maximizam a Variância?</h2>

<img data-src="img/cam4.png" style="width:40.0%" class="r-stretch quarto-figure-center"><p class="caption"><strong>Fig.</strong>&nbsp;3<strong>.</strong> Outra Projeção</p></section>
<section id="etapas-da-análise-de-componentes-principais" class="slide level2">
<h2>Etapas da Análise de Componentes Principais</h2>
<blockquote>
<blockquote>
<p>A Análise de Componentes Principais pressupões que as variáveis são correlacionadas!</p>
</blockquote>
</blockquote>
<ul>
<li class="fragment"><p>Passo 1: Padronização das Variáveis</p></li>
<li class="fragment"><p>Passo 2: Redução da Dimensão</p></li>
<li class="fragment"><p>Passo 3: Comunicação dos Resultados</p></li>
</ul>
</section>
<section id="comunicação-dos-resultados" class="slide level2">
<h2>Comunicação dos Resultados</h2>

<img data-src="img/biplot_happy.jpeg" style="width:80.0%" class="r-stretch quarto-figure-center"><p class="caption"><strong>Fig.</strong>&nbsp;4<strong>.</strong> Biplot: World Happiness Report 2021</p></section>
<section id="comunicação-dos-resultados-1" class="slide level2">
<h2>Comunicação dos Resultados</h2>

<img data-src="img/biplot_child.jpeg" style="width:80.0%" class="r-stretch quarto-figure-center"><p class="caption"><strong>Fig.</strong>&nbsp;5<strong>.</strong> Biplot: Khan child cancer dataset consiste em um Matriz 63 × 2308 de dados de expressão gênica, para 63 crianças e 2308 genes.</p></section>
<section id="ilustração-dados-usaarrests" class="slide level2">
<h2>Ilustração: Dados <code>USAarrests</code></h2>
<ul>
<li class="fragment"><p>Para cada um dos 50 estados dos EUA, os dados contém o número de detenções por 100.000 residentes para cada um de três crimes: <code>Assault</code>, <code>Murder</code> e <code>Rape</code>, e `UrbanPop, a porcentagem da população de cada estado que vive em áreas urbanas.</p></li>
<li class="fragment"><p>A PCA foi realizada após padronizar cada variável para terem média zero e desvio padrão um.</p></li>
</ul>
</section>
<section id="usaarrests-biplot" class="slide level2">
<h2><code>USAarrests</code>: <code>biplot</code></h2>

<img data-src="img/biplot.jpeg" style="width:65.0%" class="r-stretch quarto-figure-center"><p class="caption"><strong>Fig.</strong>&nbsp;6<strong>.</strong> biplot</p></section>
<section id="usaarrests-detalhes-do-gráfico" class="slide level2">
<h2><code>USAarrests</code>: Detalhes do Gráfico</h2>
<ul>
<li class="fragment"><p>A <a href="#/fig-biplot">Figura&nbsp;6</a> é conhecida como <strong>biplot</strong>, porque exibe ambos: os <strong>scores</strong> e as <strong>cargas</strong> dos componentes principais.</p></li>
<li class="fragment"><p>Os nomes dos estados em azul representam os <em>scores</em> dos dois primeiros componentes principais.</p></li>
<li class="fragment"><p>As setas laranja indicam os dois vetores de cargas dos dois primeiros componentes principais (com eixos na parte superior e a direita).</p></li>
<li class="fragment"><p>Por exemplo, a carga para <code>Rape</code> do primeiro componente é 0:54, e 0:17 para o segundo componente [<code>Rape</code> está centrado no ponto (0:54; 0:17)].</p></li>
</ul>
</section>
<section id="usaarrests-vetores-das-cargas-dos-cps" class="slide level2">
<h2><code>USAarrests</code>: Vetores das Cargas dos CPs</h2>
<table>
<thead>
<tr class="header">
<th style="text-align: center;"></th>
<th style="text-align: center;">CP1</th>
<th style="text-align: center;">CP2</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">Murder</td>
<td style="text-align: center;">0.5358995</td>
<td style="text-align: center;">-0.4181809</td>
</tr>
<tr class="even">
<td style="text-align: center;">Assault</td>
<td style="text-align: center;">0.5831836</td>
<td style="text-align: center;">-0.1879856</td>
</tr>
<tr class="odd">
<td style="text-align: center;">UrbanPop</td>
<td style="text-align: center;">0.2781909</td>
<td style="text-align: center;">0.8728062</td>
</tr>
<tr class="even">
<td style="text-align: center;">Rape</td>
<td style="text-align: center;">0.5434321</td>
<td style="text-align: center;">0.1673186</td>
</tr>
</tbody>
</table>
<p><span class="math display">\[
\begin{align*}
z_{12} &amp;= 0.54\text{Murder} + 0.58\text{Assault} + 0.54\text{Rape}  
          + 0.28\text{UrbanPop} \\
z_{22} &amp;= - 0.42\text{Murder} - 0.19\text{Assault} + 0.17\text{Rape}
          + 0.87\text{UrbanPop}
\end{align*}
\]</span></p>
</section>
<section id="usaarrests-interpretação" class="slide level2">
<h2><code>USAarrests</code>: Interpretação</h2>
<ul>
<li class="fragment"><p>Na <a href="#/fig-biplot">Figura&nbsp;6</a>, vemos que o primeiro vetor de cargas atribui peso aproximadamente igual a <code>Assault</code>, <code>Murder</code> e <code>Rape</code>, e com peso menor para <code>UrbanPop</code>. Portanto, este CP corresponde aproximadamente a uma medida das taxas globais de crimes graves.</p></li>
<li class="fragment"><p>O segundo vetor de cargas coloca a maior parte de seu peso em <code>UrbanPop</code> e muito menos peso nas outras características. Portanto, esse CP corresponde aproximadamente ao nível de urbanização do estado.</p></li>
</ul>
</section>
<section id="usaarrests-interpretação-1" class="slide level2">
<h2><code>USAarrests</code>: Interpretação</h2>
<ul>
<li class="fragment"><p>No geral, vemos que as variáveis relacionadas ao crime (<code>Assault</code>, <code>Murder</code> e <code>Rape</code>) estão localizadas próximas umas das outras, e que a variável <code>UrbanPop</code> está distante das outras três.</p></li>
<li class="fragment"><p>Isto indica que as variáveis relacionadas com o crime são correlacionadas entre si – estados com altas taxas de homicídio tendem a ter altas taxas de agressão e de estupro – e que a variável <code>UrbanPop</code> está menos correlacionada com as outras três.</p></li>
</ul>
</section>
<section id="usaarrests-interpretação-2" class="slide level2 smaller">
<h2><code>USAarrests</code>: Interpretação</h2>
<ul>
<li class="fragment"><p>Podemos examinar as diferenças entre os estados através dos dois vetores de scores (<span class="math inline">\(z\)</span>) dos CPs da <a href="#/fig-biplot">Figura&nbsp;6</a>.</p></li>
<li class="fragment"><p>A discussão sobre os vetores de carga sugere que estados com elevados scores positivos no primeiro componente, como a Califórnia, Nevada e a Florida, têm taxas de criminalidade elevadas, enquanto estados como o Dakota do Norte, com scores negativos no primeira componente, têm taxas de criminalidade baixas.</p></li>
<li class="fragment"><p>A Califórnia também tem um score alto no segundo componente, indicando um alto nível de urbanização, enquanto o oposto é verdadeiro para estados como o Mississippi.</p></li>
</ul>
</section>
<section id="usaarrests-interpretação-3" class="slide level2">
<h2><code>USAarrests</code>: Interpretação</h2>
<ul>
<li class="fragment">Estados com scores próximos de zero em ambos os componentes, como Indiana, apresentam níveis aproximadamente médios de criminalidade e urbanização.</li>
</ul>
</section>
<section id="outra-interpretação-geométrica-dos-cps" class="slide level2">
<h2>Outra Interpretação Geométrica dos CPs</h2>
<ul>
<li class="fragment">Os dois primeiros vetores de cargas dos componentes principais em um conjunto de dados tridimensionais simulados são mostrados no painel esquerdo da Figura 3, esses dois vetores de carga abrangem um plano ao longo do qual as observações têm a maior variância.</li>
</ul>
</section>
<section id="outra-interpretação-geométrica-dos-cps-1" class="slide level2">
<h2>Outra Interpretação Geométrica dos CPs</h2>

<img data-src="img/pca_geom2.jpeg" style="width:65.0%" class="r-stretch quarto-figure-center"><p class="caption"><strong>Fig.</strong>&nbsp;7<strong>.</strong> 90 dados simuladas em 3D. As observações são exibidas em cores para facilitar a visualização. <strong>Esq.</strong>: os dois primeiras vetores de cargas dos CPs abrangem o plano que melhor se ajusta aos dados. O plano é posicionado para minimizar a soma dos quadrados das distâncias a cada ponto.</p></section>
<section id="pca-hiperplano-mais-próximo-das-observacões" class="slide level2 smaller">
<h2>PCA = hiperplano mais próximo das observacões</h2>
<ul>
<li class="fragment"><p>O primeiro vetor de cargas do primeiro CP tem uma propriedade especial: define a linha no espaço p-dimensional que está <strong>mais próxima</strong> das <span class="math inline">\(n\)</span> observações (usando a média quadrada distância euclidiana como medida de proximidade).</p></li>
<li class="fragment"><p>A noção de componentes principais como as dimensões que estão mais próximos das <span class="math inline">\(n\)</span> observações se estende além do primeiro componente principal.</p></li>
<li class="fragment"><p>Por exemplo, os dois primeiros CPs de um conjunto de dados geram o plano que está mais próximo das <span class="math inline">\(n\)</span> observações, em termos da distância euclidiana quadrática média.</p></li>
</ul>
</section>
<section id="scaling-das-variáveis-é-importante" class="slide level2 smaller">
<h2><em>Scaling</em> das variáveis é importante</h2>

<img data-src="img/scale.jpeg" style="width:80.0%" class="r-stretch quarto-figure-center"><p class="caption"><strong>Fig.</strong>&nbsp;8<strong>.</strong> Scaling</p><ul>
<li class="fragment"><p>Se as variáveis estiverem em unidades diferentes, recomenda-se escalonar cada uma para ter desvio padrão igual a um.</p></li>
<li class="fragment"><p>Se estiverem nas mesmas unidades, você pode ou não escalonar as variáveis.</p></li>
</ul>
</section>
<section id="scaling-das-variáveis-é-importante-1" class="slide level2 smaller">
<h2><em>Scaling</em> das variáveis é importante</h2>
<ul>
<li class="fragment"><p>Nestes dados, as variáveis são medidas em unidades diferentes; <code>Assault</code>, <code>Raper</code> e <code>Murder</code> são relatados como o número de ocorrências por 100.000 pessoas, e <code>UrbanPop</code> é a porcentagem da população do estado que vive em área urbana.</p></li>
<li class="fragment"><p>Essas quatro variáveis têm variâncias 18,97, 87,73, 6.945,16 e 209,5, respectivamente. Conseqüentemente, se realizarmos PCA nas variáveis não escalonadas, então o primeiro vetor de cargas do primeiro CP terá uma carga muito grande para <code>Assault</code>, uma vez que essa variável tem de longe a maior variância.</p></li>
<li class="fragment"><p>O gráfico à direita na <a href="#/fig-geom2">Figura&nbsp;8</a> exibe os dois primeiros CPs dos dados <code>USArrests</code>, sem escalonar as variáveis para ter desvio padrão um.</p></li>
<li class="fragment"><p>Como previsto, o primeiro vetor de cargas coloca quase todo o seu peso em <code>Assault</code>, enquanto o segundo vetor de cargas do componente principal coloca quase todo o seu peso no <code>UrpanPop</code>.</p></li>
<li class="fragment"><p>Comparando isto com o gráfico da esquerda, vemos que a escala tem de facto um efeito substancial nos resultados obtidos.</p></li>
</ul>
</section>
<section id="unicidade-dos-componentes-principais" class="slide level2">
<h2>Unicidade dos Componentes Principais</h2>
<ul>
<li class="fragment"><p>Cada vetor de carregamento de componente principal é único, até uma inversão de sinal.</p></li>
<li class="fragment"><p>Isto significa que dois softwares diferentes produzirão os mesmos vetores de cargas dos componentes principais, embora os sinais desses vetores possam ser diferentes.</p></li>
<li class="fragment"><p>Os sinais podem diferir porque cada vetor de carga de um CP especifica uma direção no espaço <span class="math inline">\(p\)</span>-dimensional: inverter o sinal não tem efeito, pois a direção não muda.</p></li>
<li class="fragment"><p>Da mesma forma, os vetores de scores são únicos até uma inversão de sinal, uma vez que a variância de <span class="math inline">\(Z\)</span> é igual à variância de <span class="math inline">\(−Z\)</span>.</p></li>
</ul>
</section>
<section id="proporção-da-variância-explicada-pve" class="slide level2">
<h2>Proporção da Variância Explicada (PVE)</h2>
<ul>
<li class="fragment"><p>Para entender a força de cada componente, estamos interessado em saber a proporção da variância explicada (PVE) por cada um.</p></li>
<li class="fragment"><p>A variância total em um conjunto de dados (assumindo que as variáveis foram centradas para ter média zero) é definida como:</p></li>
</ul>
<p><span class="math display">\[
\sum_{j=1}^{p} V(X_j) = \sum_{j=1}^{p} \frac{1}{n} \sum_{i=1}^{n} x_{ij}^2
\]</span></p>
</section>
<section id="proporção-da-variância-explicada-pve-1" class="slide level2">
<h2>Proporção da Variância Explicada (PVE)</h2>
<ul>
<li class="fragment">E a variância explicada pelo <span class="math inline">\(m\)</span>-ésimo CP é:</li>
</ul>
<p><span class="math display">\[
V(Z_m) = \frac{1}{n} \sum_{i=1}^{n} z_{im}^2
\]</span> Pode ser demonstrado que:</p>
<p><span class="math display">\[
\sum_{j=1}^{p} V(X_j) = \sum_{m=1}^{M} V(Z_m)
\]</span> com <span class="math inline">\(M = \min(n-1,p)\)</span></p>
</section>
<section id="proporção-da-variância-explicada-pve-2" class="slide level2">
<h2>Proporção da Variância Explicada (PVE)</h2>
<p>Portanto, a PVE pelo <span class="math inline">\(m\)</span>-ésimo CP é uma qtde positiva entre 0 e 1:</p>
<p><span class="math display">\[
\frac{\sum_{i=1}^{n} z_{im}^2}{\sum_{j=1}^{p} \sum_{i=1}^{n} x_{ij}^2}
\]</span> As PVEs somam 1. Em algumas análises, é usual fazer os gráficos da PVE e PVE acumulada, veja a <a href="#/fig-pve">Figura&nbsp;9</a></p>
</section>
<section id="proporção-da-variância-explicada-pve-3" class="slide level2">
<h2>Proporção da Variância Explicada (PVE)</h2>

<img data-src="img/pve.jpeg" style="width:80.0%" class="r-stretch quarto-figure-center"><p class="caption"><strong>Fig.</strong>&nbsp;9<strong>.</strong> PVE e PVE Acumulada</p></section>
<section id="quantos-componentes-principais-devemos-usar" class="slide level2">
<h2>Quantos componentes principais devemos usar?</h2>
<ul>
<li class="fragment"><p>Se usamos CPs como um sumário dos dados, quantos componentes serão suficientes?</p></li>
<li class="fragment"><p>Não há uma resposta simples para esta pergunta, pois a validação cruzada não é disponível para esse fim. Por que não?</p></li>
<li class="fragment"><p>Porque não temos uma variável resposta.</p></li>
<li class="fragment"><p>O gráfico da PVE anterior pode ser usado como guia: procuramos um “cotovelo”.</p></li>
</ul>
</section>
<section id="resumo" class="slide level2">
<h2>Resumo</h2>
<ul>
<li class="fragment"><p>A Análise de componentes principais, é um método estatístico multivariado que combina as informaçõesde diversas variáveis observadas nos mesmos casos em menos variáveis, chamadas <strong>componentes principais</strong>.</p></li>
<li class="fragment"><p>A <strong>informação</strong> é medida pela variância total das variáveis originais, e os componentes principais otimamente explicam a maior parte dessa variação.</p></li>
<li class="fragment"><p>Os CPs possuem propriedades geométricas que permitem uma visualização intuitiva e uma interpretação estruturada das principais características inerentes a um conjunto de dados multivariado complexo.</p></li>
</ul>

<img src="img/logo.jpeg" class="slide-logo r-stretch"><div class="footer footer-default">

</div>
</section>
    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="aula04_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="aula04_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="aula04_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="aula04_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="aula04_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="aula04_files/libs/revealjs/plugin/reveal-chalkboard/plugin.js"></script>
  <script src="aula04_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="aula04_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="aula04_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="aula04_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="aula04_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'smaller': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleChalkboard(event)\"><kbd>b</kbd> Toggle Chalkboard</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleNotesCanvas(event)\"><kbd>c</kbd> Toggle Notes Canvas</a></li>\n<li class=\"slide-tool-item\" data-item=\"6\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.downloadDrawings(event)\"><kbd>d</kbd> Download Drawings</a></li>\n<li class=\"slide-tool-item\" data-item=\"7\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'chalkboard': {"buttons":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'slide',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, RevealChalkboard, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button', {
        text: function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
        }
      });
      clipboard.on('success', function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copiada");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copiada");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      });
      function tippyHover(el, contentFn) {
        const config = {
          allowHTML: true,
          content: contentFn,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start'
        };
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          return note.innerHTML;
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>